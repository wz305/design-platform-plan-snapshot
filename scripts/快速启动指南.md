# 设计平台开发服务器快速启动指南

## 🚀 最简单的启动方式（推荐）

### Windows 批处理脚本（双击即可运行）

**启动服务器：**
- 双击 `scripts/start-server.bat`

**停止服务器：**
- 双击 `scripts/stop-server.bat`

**重启 Mock Server（AD21 web-mock）：**
- 双击 `scripts/restart-mock-server.ps1`

---

## 📋 启动方式对比

| 方式 | 难度 | 是否阻塞终端 | 适用场景 |
|------|------|-------------|----------|
| **双击批处理文件** | ⭐ 最简单 | 否 | 快速启动，不需要终端 |
| **PowerShell 脚本** | ⭐⭐ 简单 | 否 | 开发者，需要更多控制 |
| **NPM 脚本** | ⭐⭐ 简单 | 否 | 在项目目录中操作 |
| **前台启动** | ⭐⭐ 简单 | 是 | 需要查看实时日志 |

---

## 📝 详细使用说明

### 方式一：双击批处理文件（最简单）

1. 在文件资源管理器中打开项目目录
2. 进入 `scripts` 文件夹
3. 双击 `start-server.bat` 启动服务器
4. 停止时，双击 `stop-server.bat`

**优点：**
- 不需要打开终端
- 不会阻塞任何窗口
- 适合快速测试

### 方式二：使用 PowerShell 脚本

**启动服务器：**
```powershell
# 进入项目目录
cd d:\!\Work\设计平台计划

# 后台启动（推荐）
.\scripts\start-server-background.ps1 -Clean

# 或指定端口
.\scripts\start-server-background.ps1 -Port 3000
```

**停止服务器：**
```powershell
.\scripts\stop-server.ps1
```

**优点：**
- 在任何 PowerShell 终端中都可以使用
- 启动后可以继续在当前终端操作
- 提供详细的启动信息

### 方式三：使用 NPM 脚本

**启动服务器：**
```bash
# 进入项目目录
cd designer-platform

# 清理并后台启动
npm run start:bg:clean

# 或简单后台启动
npm run start:dev:bg
```

**停止服务器：**
```bash
npm run stop:dev
```

**优点：**
- 跨终端兼容（PowerShell、CMD、Git Bash）
- 命令简短易记
- 符合 npm 标准使用方式

### 方式四：前台启动（需要日志查看时）

```powershell
# 进入项目目录
cd designer-platform

# 前台启动（会阻塞终端）
npm run dev

# 或使用脚本
.\scripts\start-dev-server.ps1 -Clean
```

**适用场景：**
- 需要实时查看编译日志
- 调试编译错误
- 查看详细的启动过程

---

## 🌐 服务器地址

启动成功后，可以通过以下地址访问：

- **本地访问：** http://localhost:5181
- **局域网访问：** http://[你的IP地址]:5181

脚本会自动显示你的局域网IP地址。

---

## ⚙️ 常用参数

### 指定端口
```powershell
# PowerShell 方式
.\scripts\start-server-background.ps1 -Port 3000

# NPM 方式（需要修改脚本）
npm run dev -- --port 3000
```

### 启动前清理
```powershell
# 自动清理端口占用和残留进程
.\scripts\start-server-background.ps1 -Clean
```

---

## 🛠️ 故障排除

### 1. 端口已被占用
**问题：** 启动时提示端口被占用

**解决方案：**
```powershell
# 方式一：使用 -Clean 参数
.\scripts\start-server-background.ps1 -Clean

# 方式二：手动清理
.\scripts\stop-server.ps1

# 方式三：使用不同的端口
.\scripts\start-server-background.ps1 -Port 3000
```

### 2. 服务器启动失败
**问题：** 服务器启动超时或失败

**解决方案：**
1. 检查 Node.js 和 npm 是否已安装：
   ```bash
   node --version
   npm --version
   ```

2. 手动安装依赖：
   ```bash
   cd designer-platform
   npm install
   ```

3. 查看启动日志（检查最小化的 PowerShell 窗口）

### 3. 找不到服务器
**问题：** 启动成功但无法访问

**解决方案：**
1. 检查防火墙设置
2. 确认端口 5181 未被其他程序占用
3. 尝试使用 `http://127.0.0.1:5181`

### 4. PowerShell 执行策略错误
**问题：** 提示无法加载脚本

**解决方案：**
```powershell
# 以管理员身份运行 PowerShell，执行：
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

---

## 📚 更多信息

- **完整文档：** 查看 `scripts/README.md`
- **项目文档：** 查看 `designer-platform/README.md`

---

## 💡 推荐开发流程

```bash
# 1. 启动服务器（后台运行）
.\scripts\start-server-background.ps1 -Clean

# 2. 打开浏览器访问
# http://localhost:5181

# 3. 继续在终端进行其他开发工作
# ...

# 4. 完成工作后停止服务器
.\scripts\stop-server.ps1
```

---

## ✅ 快速检查清单

启动前检查：
- [ ] 已进入项目目录
- [ ] Node.js 已安装（运行 `node --version`）
- [ ] 依赖已安装（运行 `npm install`，如果还没安装）

启动后检查：
- [ ] 终端显示"启动成功"
- [ ] 可以访问 http://localhost:5181
- [ ] 页面正常加载

停止前检查：
- [ ] 保存了所有修改
- [ ] 确认不再需要服务器
