# 设计平台服务器启动规则

## 核心原则

**所有服务器启动必须使用不阻塞模式**

开发服务器启动时必须使用后台/非阻塞模式，确保：
1. 启动后终端不会被阻塞，可以继续执行其他命令
2. 服务器在独立进程中运行，不会影响后续操作
3. 便于管理多个服务或同时进行开发工作

## 推荐启动方式

### 方式一：NPM 脚本（推荐）
```bash
# 启动（后台，不阻塞）
npm run start:bg

# 停止
npm run stop

# 重启
npm run restart
```

### 方式二：PowerShell 脚本
```powershell
# 启动（后台，不阻塞）
.\scripts\start-server-background.ps1

# 停止
.\scripts\stop-server.ps1
```

## 禁止的启动方式

❌ **禁止使用阻塞式启动**
```powershell
# 不要使用这些阻塞方式
npm run dev
npm run start
vite
```

## 启动功能

启动脚本自动执行以下操作：
1. **清理端口** - 自动终止占用端口 5181 的旧进程
2. **检查依赖** - 自动安装缺失的 node_modules
3. **后台启动** - 使用隐藏窗口启动，不阻塞终端
4. **输出信息** - 显示访问地址和进程 PID

## 服务器信息

- **默认端口：** 5181
- **本地访问：** http://localhost:5181
- **局域网访问：** http://[IP地址]:5181

## 标准工作流程

1. **启动服务器**（不阻塞）
   ```bash
   npm run start:bg
   ```

2. **验证启动**
   - 终端显示服务器信息
   - 可以访问 http://localhost:5181
   - 终端可以继续使用

3. **继续开发**
   - 终端未被阻塞
   - 可以执行其他命令

4. **停止服务器**
   ```bash
   npm run stop
   ```

## 故障处理

### 端口占用
启动脚本会自动清理端口，无需手动处理。

### 手动清理
```bash
npm run stop
```

## 文档参考

- **快速启动指南：** `scripts/快速启动指南.md`
- **完整文档：** `scripts/README.md`
