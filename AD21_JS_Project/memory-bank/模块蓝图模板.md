# Module Blueprint 模板（module.blueprint.md）

> 每次协商输出必须按照本模板结构化保存，便于审阅与实现。

文件位置： `modules/<module>/module.blueprint.md`

---

## 标题与元信息
```

# Module Blueprint: <模块名>

Created-By: <AI 或 人名>
Created-At: <YYYY-MM-DD HH:MM:SS>
Source-Request: <用户最初需求摘要/链接>
Version: 0.1

```

---

## 1. 语义协商（Semantic Negotiation）
- **需求复述**（AI 用自己的话复述）
- **假设清单**（列出所有做出的假设）
- **不确定点 / 需澄清的问题**（列出需用户回答的问题）
- **候选高层方案**（至少 2 个，列优缺点）
- **当前信心分数**（0-10）与理由

---

## 2. 结构协商（Structural Negotiation）
- **建议文件结构**（index/core/types/tools/steps/logic 的分布）
- **每个文件职责说明**
- **主流程草图（步骤列表）**
- **替代结构（1~2 个）及比较**
- **风险提示 / 兼容性检查**
- **结构信心分数（0-10）**

---

## 3. 接口协商（Interface Negotiation）
- **对外 API 清单**（函数名/参数/返回/描述）
- **内部接口清单**（核心函数/工具函数/步骤之间的调用）
- **输入/输出数据结构描述（ES3 语义）**
- **错误码或异常处理策略**
- **跨模块依赖清单（列模块与接口）**
- **接口信心分数（0-10）**

---

## 4. 节点协商（Node-Level Negotiation）
> 对每个需要实现的函数，逐个列出如下信息

```

Function: <函数名>
用途:
输入:
输出:
步骤拆解:
1.
2.
...
日志点:

* debug: 在何处记录？
* info: 在何处记录？
  错误处理:
* 情形1 -> 处理策略
  边界条件:
  依赖工具函数:
  性能考虑:
  测试要点:
  信心分数（0-10）:
  风险说明:

```

（对所有函数重复上述结构）

---

## 5. 执行命令（Execution Command）
- **将要修改/新增的文件（明确路径）**
- **每个文件的具体操作清单（新增函数、修改段落、删除项）**
- **执行顺序（步骤）**
- **回滚策略与备份说明**
- **最终信心分数（0-10）**
- **用户确认提示**（用户必须写 “确认执行” 才能进入实现阶段）

---

## 变更记录（每次协商迭代都记录一条）
- Version: 0.1 -> 0.2
- Changed-By: <AI/用户>
- Changed-At: <时间>
- Change-Summary: <简述>

---

## 备注
- blueprint 是模块的 SRS（软件需求规格），实现者与 AI 必须以此为准。  
- blueprint 不参与构建流程，但必须被纳入版本控制（git）。  