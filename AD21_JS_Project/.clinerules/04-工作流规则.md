# 📄 **04-工作流规则.md**

（用于 workflows 的全局工作规则）

```markdown
# Workflow Hooks（工作流全局规则）

本文件为 workflows 提供统一开发动作规范。

---

## 1. 所有 workflow 在执行前必须：

1. 加载 .clinerules 中所有规范  
2. 读取 memory-bank 图表内容  
3. 校验输入模块名称合法性  
4. 按模块结构生成或修改文件  
5. 自动补充 logger.debug  
6. 自动补充注释  

---

## 2. 所有自动修改必须符合以下顺序：

1. Read rules  
2. Analyze intent  
3. Modify files following module structure  
4. Validate ES3  
5. Auto log injection  
6. Auto comment  
7. Apply workflow actions  

---

## 3. 测试集成工作流

### 构建后必须执行测试
- 所有构建操作完成后自动运行测试套件
- 测试失败时构建流程终止
- 测试报告保存至 tests/reports/test-results.json

### 模块开发测试要求
- 新模块必须包含对应的测试用例
- 核心模块需要完整验证测试
- 开发模块需要基础功能测试
- 所有测试必须符合ES3语法规范

### 测试状态处理
- 核心模块测试失败：立即终止并报告错误
- 开发模块测试警告：记录但继续执行
- 集成测试失败：整体构建失败

---

## 🔗 相关规范

- **核心开发规则**：参考 `01-核心开发规则.md`
- **模块架构规则**：参考 `03-模块架构规则.md`
- **协商流程规则**：参考 `02-协商流程规则.md`
