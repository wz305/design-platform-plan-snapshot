# ğŸ“„ **03-æ¨¡å—æ¶æ„è§„åˆ™.md**

ï¼ˆæ¨¡å—å¯¼å‡ºå’Œæ¶æ„çš„æ ‡å‡†è§„èŒƒï¼‰

````markdown
# æ¨¡å—å¯¼å‡ºè§„åˆ™

## ğŸ¯ æ ¸å¿ƒåŸåˆ™
- æ¯ä¸ªæ¨¡å—ä½¿ç”¨ä¸€ä¸ªå¤§IIFEåŒ…è£¹
- è¿”å›çš„å¯¹è±¡å°±æ˜¯è¯¥æ¨¡å—çš„æ¥å£
- æ¨¡å—å˜é‡åç­‰äºè¿”å›çš„å¯¹è±¡
- æ„å»ºåè‡ªåŠ¨æˆä¸ºå…¨å±€å˜é‡ï¼Œæ— éœ€é¢å¤–å¯¼å‡º

## ğŸ“ æ ‡å‡†æ¨¡æ¿

### æ¨¡å—å®šä¹‰
```js
var ModuleName = (function(){
    // ç§æœ‰å˜é‡å’Œå‡½æ•°
    var _privateVar = "private";
    
    function _privateFunction() {
        // å†…éƒ¨é€»è¾‘
    }
    
    // å…¬å…±æ¥å£å‡½æ•°
    function create(options) {
        // å®ç°é€»è¾‘
    }
    
    function doSomething() {
        // å®ç°é€»è¾‘
    }
    
    // è¿”å›æ¨¡å—æ¥å£å¯¹è±¡
    return {
        create: create,        // ModuleName.create
        doSomething: doSomething  // ModuleName.doSomething
    };
    
})();

// æ³¨æ„ï¼šæ— éœ€å…¨å±€å¯¼å‡ºï¼
// æ„å»ºå ModuleName è‡ªåŠ¨æˆä¸ºå…¨å±€å˜é‡
```

## ğŸ¯ æ„å»ºåçš„æ•ˆæœ

### æ–‡ä»¶åˆå¹¶å
```js
// æ„å»ºåçš„æ–‡ä»¶ï¼ˆç®€åŒ–ç‰ˆï¼‰
var LoggerModule = (function(){
    return {
        create: function(options) {...},
        getLogger: function(name) {...}
    };
})();

var ObjectModule = (function(){
    return {
        createObject: function(options) {
            // ç›´æ¥ä½¿ç”¨å…¶ä»–æ¨¡å—
            LoggerModule.getLogger("ObjectModule").info("Creating object");
            return {type: options.type};
        }
    };
})();

// æ‰€æœ‰æ¨¡å—å˜é‡è‡ªåŠ¨æˆä¸ºå…¨å±€å˜é‡
// æ— éœ€ä»»ä½•é¢å¤–çš„å¯¼å‡ºæ“ä½œ
```

## ğŸ¯ å…³é”®ç†è§£

### æ¨¡å—å˜é‡æœ¬è´¨
```js
// ModuleName å°±æ˜¯è¿”å›çš„å¯¹è±¡
var ModuleName = (function(){
    return {
        create: function() { return "created"; },
        destroy: function() { return "destroyed"; }
    };
})();

// æ‰€ä»¥ï¼š
// ModuleName.create() === "created"
// ModuleName.destroy() === "destroyed"
```

### æ¨¡å—é—´è®¿é—®
```js
// æ¨¡å—A
var ModuleA = (function(){
    return {
        doWork: function() { return "working"; }
    };
})();

// æ¨¡å—B
var ModuleB = (function(){
    // ç›´æ¥ä½¿ç”¨å…¶ä»–æ¨¡å—ï¼ˆæ„å»ºåè‡ªåŠ¨å¯è®¿é—®ï¼‰
    var moduleA = ModuleA;
    
    return {
        cooperate: function() {
            return moduleA.doWork();  // ä½¿ç”¨æ¨¡å—Açš„åŠŸèƒ½
        }
    };
})();
```

## âœ… æ­£ç¡®ç¤ºä¾‹

### ç®€æ´çš„æ¨¡å—å®šä¹‰
```js
// âœ… æ ‡å‡†æ¨¡å—å®šä¹‰
var LoggerModule = (function(){
    var _instances = {};
    var _config = {level: 1, enabled: true};
    
    function create(options) {
        var name = (options && options.moduleName) || "Default";
        var instance = {
            name: name,
            log: function(message) {
                if (_config.enabled) {
                    console.log("[" + name + "] " + message);
                }
            }
        };
        _instances[name] = instance;
        return instance;
    }
    
    function getLogger(name) {
        return _instances[name] || create({moduleName: name});
    }
    
    return {
        create: create,
        getLogger: getLogger
    };
})();
```

### æ¨¡å—é—´ä½¿ç”¨
```js
// âœ… ç›´æ¥ä½¿ç”¨å…¶ä»–æ¨¡å—
var ObjectModule = (function(){
    function createObject(options) {
        // ç›´æ¥ä½¿ç”¨å…¶ä»–æ¨¡å—ï¼ˆæ„å»ºåè‡ªåŠ¨å¯è®¿é—®ï¼‰
        LoggerModule.getLogger("ObjectModule").info("Creating object: " + options.type);
        
        return {
            type: options.type,
            position: options.position
        };
    }
    
    return {
        createObject: createObject
    };
})();
```

## ğŸš« ä¸¥ç¦äº‹é¡¹

### ç»å¯¹ç¦æ­¢
- **ç¦æ­¢ä½¿ç”¨windowå¯¹è±¡**ï¼šADç¯å¢ƒä¸å­˜åœ¨windowå¯¹è±¡
- **ç¦æ­¢ä»»ä½•å½¢å¼çš„å…¨å±€å¯¼å‡ºæ“ä½œ**ï¼šæ— éœ€é¢å¤–å¯¼å‡º
- **ç¦æ­¢å¤æ‚çš„ç¯å¢ƒæ£€æµ‹**ï¼šæ„å»ºåç¯å¢ƒç»Ÿä¸€
- **ç¦æ­¢åœ¨IIFEå¤–åˆ›å»ºå˜é‡**ï¼šç ´åæ¨¡å—å°è£…
- **ç¦æ­¢æš´éœ²ä¸å¿…è¦çš„å†…éƒ¨å®ç°**ï¼šä¿æŒæ¥å£æœ€å°åŒ–

### é”™è¯¯ç¤ºä¾‹
```js
// âŒ ç¦æ­¢ï¼šä½¿ç”¨windowå¯¹è±¡
var ModuleName = (function(){
    return {create: create};
})();
window.ModuleName = ModuleName;

// âŒ ç¦æ­¢ï¼šå¤æ‚çš„ç¯å¢ƒæ£€æµ‹
var ModuleName = (function(){
    return {create: create};
})();
if (typeof window !== "undefined") {
    window.ModuleName = ModuleName;
} else {
    ModuleName_GLOBAL = ModuleName;
}

// âŒ ç¦æ­¢ï¼šä¸å¿…è¦çš„å…¨å±€å¯¼å‡º
var ModuleName = (function(){
    return {create: create};
})();
ModuleName_GLOBAL = ModuleName;  // ä¸å¿…è¦ï¼

// âŒ ç¦æ­¢ï¼šåœ¨IIFEå¤–åˆ›å»ºå˜é‡
var ModuleName_Core = {create: create};  // ç ´åå°è£…
var ModuleName = (function(){
    return ModuleName_Core;
})();
```

## ğŸ¯ æ¶æ„ä¼˜åŠ¿

### æç®€åŒ–
- âœ… æœ€å°‘çš„ä»£ç é‡
- âœ… é›¶é…ç½®çš„æ¨¡å—ç³»ç»Ÿ
- âœ… è‡ªåŠ¨çš„å…¨å±€è®¿é—®
- âœ… ç›´æ¥çš„æ¨¡å—ä¾èµ–

### æ¸…æ™°æ€§
- âœ… ä¸€ä¸ªæ¨¡å—ä¸€ä¸ªæ–‡ä»¶
- âœ… è¿”å›å¯¹è±¡å³æ¥å£
- âœ… ç§æœ‰å®ç°å®Œå…¨å°è£…
- âœ… æ¨¡å—è¾¹ç•Œæ¸…æ™°

### æ„å»ºå‹å¥½
- âœ… æ–‡ä»¶æŒ‰é¡ºåºæ‹¼æ¥å³å¯
- âœ… æ— éœ€æ¨¡å—è§£æ
- âœ… æ— éœ€ä¾èµ–ç®¡ç†
- âœ… é›¶è¿è¡Œæ—¶å¼€é”€

### ç»´æŠ¤æ€§
- âœ… æ¨¡å—èŒè´£å•ä¸€
- âœ… æ¥å£ç¨³å®šï¼Œå†…éƒ¨çµæ´»
- âœ… æ˜“äºç†è§£å’Œè°ƒè¯•
- âœ… ç¬¦åˆES3æ ‡å‡†

## ğŸ“‹ å¼€å‘æµç¨‹

### 1. åˆ›å»ºæ¨¡å—
```js
// æ–°å»ºæ¨¡å—æ–‡ä»¶ï¼šModuleName.js
var ModuleName = (function(){
    // å®ç°æ¨¡å—é€»è¾‘
    return {
        // å…¬å…±æ¥å£
    };
})();
```

### 2. æ¨¡å—é—´ä¾èµ–
```js
// åœ¨å…¶ä»–æ¨¡å—ä¸­ä½¿ç”¨
var DependentModule = (function(){
    // ç›´æ¥ä½¿ç”¨å…¶ä»–æ¨¡å—
    var dependency = ModuleName;
    
    return {
        doSomething: function() {
            return dependency.create();
        }
    };
})();
```

### 3. æ„å»ºé…ç½®
```json
// merge-order.json
{
    "mergeOrder": [
        "src/modules/ModuleName.js",
        "src/modules/DependentModule.js"
    ]
}
```

## ğŸ¯ æœ€ç»ˆæ¶æ„æ€»ç»“

### å¼€å‘æ—¶
- æ¯ä¸ªæ¨¡å—ä¸€ä¸ªæ–‡ä»¶
- æ¸…æ™°çš„IIFEç»“æ„
- è¿”å›æ¥å£å¯¹è±¡

### æ„å»ºå
- æ‰€æœ‰æ–‡ä»¶åˆå¹¶
- æ¨¡å—å˜é‡è‡ªåŠ¨å…¨å±€
- ç›´æ¥äº’ç›¸è®¿é—®

### è¿è¡Œæ—¶
- é›¶é…ç½®æ¨¡å—ç³»ç»Ÿ
- æœ€å°æ€§èƒ½å¼€é”€
- æ¸…æ™°çš„ä¾èµ–å…³ç³»

---

## ğŸ”— ç›¸å…³è§„èŒƒ

- **æ ¸å¿ƒå¼€å‘è§„åˆ™**ï¼šå‚è€ƒ `01-æ ¸å¿ƒå¼€å‘è§„åˆ™.md`
- **åå•†æµç¨‹è§„èŒƒ**ï¼šå‚è€ƒ `02-åå•†æµç¨‹è§„åˆ™.md`
- **å·¥ä½œæµè§„èŒƒ**ï¼šå‚è€ƒ `04-å·¥ä½œæµè§„åˆ™.md`

````

**æ­¤æ–‡ä»¶å®šä¹‰äº†é¡¹ç›®çš„æ¨¡å—å¯¼å‡ºæ ‡å‡†ï¼Œæ‰€æœ‰æ¨¡å—å¿…é¡»éµå¾ªæ­¤è§„èŒƒã€‚**
