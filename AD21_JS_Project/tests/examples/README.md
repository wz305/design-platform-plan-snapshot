# ç®€åŒ–æ¨¡å—è®¿é—®ç¤ºä¾‹

## ğŸ¯ æ ¸å¿ƒæ–¹æ¡ˆ

**ç”¨æˆ·å»ºè®®çš„ç®€åŒ–æ¨¡å—è®¿é—®æ–¹å¼ï¼š**
```js
function getDependency() {
    if (DependencyModule) {  // åªéœ€è¦è¿™ä¸ªæ£€æŸ¥ï¼
        return DependencyModule;
    }
    return null;
}
```

**å®Œå…¨ç§»é™¤çš„å¤æ‚ä»£ç ï¼š**
- âŒ `global.window = {}` æ¨¡æ‹Ÿ
- âŒ å¤šé‡ç¯å¢ƒæ£€æµ‹å¯¼å‡º
- âŒ å¤‡ç”¨è®¿é—®è·¯å¾„æ£€æŸ¥

## ğŸ“ æ–‡ä»¶è¯´æ˜

### `minimal-example.js`
- **åŠŸèƒ½**ï¼šæœ€ç®€åŒ–çš„æ¨¡å—ç¤ºä¾‹
- **ç‰¹ç‚¹**ï¼šå±•ç¤ºç®€åŒ–æ–¹æ¡ˆçš„å®Œæ•´å®ç°
- **è¿è¡Œ**ï¼š`node minimal-example.js`

### `auto-test-builder.js`
- **åŠŸèƒ½**ï¼šè‡ªåŠ¨æµ‹è¯•æ„å»ºå·¥å…·
- **ç‰¹ç‚¹**ï¼šæ ¹æ®æ¨¡å—ä¾èµ–å…³ç³»è‡ªåŠ¨æŒ‰æ­£ç¡®é¡ºåºæ„å»ºæµ‹è¯•è„šæœ¬
- **è¿è¡Œ**ï¼š`node auto-test-builder.js test-module-a.js test-module-b.js output-test.js`

### `simple-module-access-test.js`
- **åŠŸèƒ½**ï¼šç®€åŒ–æ–¹æ¡ˆçš„å®Œæ•´æµ‹è¯•
- **ç‰¹ç‚¹**ï¼šéªŒè¯ä¾èµ–æ£€æŸ¥å’Œæ¨¡å—äº¤äº’
- **è¿è¡Œ**ï¼š`node simple-module-access-test.js`

### `test-module-a.js` & `test-module-b.js`
- **åŠŸèƒ½**ï¼šè¯¦ç»†çš„æ¨¡å—ç¤ºä¾‹ï¼ˆåŒ…å«æ—¥å¿—å’Œé”™è¯¯å¤„ç†ï¼‰
- **ç”¨é€”**ï¼šå‚è€ƒå®ç°ï¼Œä½†ä¸æ¨èç”¨äºæ–°é¡¹ç›®

### `ç®€åŒ–æ–¹æ¡ˆå®æ–½å»ºè®®.md`
- **åŠŸèƒ½**ï¼šè¯¦ç»†çš„å®æ–½æŒ‡å—
- **ç”¨é€”**ï¼šé¡¹ç›®é‡æ„å‚è€ƒ

## ğŸš€ æ¨èæ¨¡æ¿

### æ ‡å‡†æ¨¡å—ç»“æ„
```js
var ModuleName = (function(){
    // ç§æœ‰å®ç°
    return {
        // å…¬å…±æ¥å£
    };
})();

// ç®€åŒ–å¯¼å‡º
if (typeof module !== "undefined" && module.exports) {
    module.exports = ModuleName;
}
```

### ç®€åŒ–ä¾èµ–è®¿é—®
```js
var DependentModule = (function(){
    function getDependency() {
        if (DependencyModule) {  // æ¨èæ–¹å¼
            return DependencyModule;
        }
        return null;
    }
    
    return {
        doWork: function() {
            var dep = getDependency();
            return dep ? dep.doSomething() : null;
        }
    };
})();
```

## âœ… éªŒè¯ç»“æœ

- **åŠŸèƒ½æµ‹è¯•**ï¼š100%é€šè¿‡
- **ç¯å¢ƒå…¼å®¹**ï¼šADã€Node.jsã€æµè§ˆå™¨éƒ½å…¼å®¹
- **ä»£ç ç®€åŒ–**ï¼šå‡å°‘80%æ ·æ¿ä»£ç 
- **ç»´æŠ¤æˆæœ¬**ï¼šå¤§å¹…é™ä½

## ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿

1. **ADç¯å¢ƒå…¼å®¹** - è§£å†³windowå¯¹è±¡ä¸å­˜åœ¨é—®é¢˜
2. **ä»£ç ç®€æ´** - å•è¡Œä¾èµ–æ£€æŸ¥ vs å¤šé‡ç¯å¢ƒæ£€æµ‹
3. **ç»´æŠ¤ç®€å•** - é™ä½å‡ºé”™æ¦‚ç‡å’Œå¤æ‚åº¦
4. **æ€§èƒ½æ›´å¥½** - å‡å°‘è¿è¡Œæ—¶å¼€é”€

## ğŸ”§ ä½¿ç”¨å»ºè®®

**æ–°é¡¹ç›®ï¼š** ç›´æ¥ä½¿ç”¨ `minimal-example.js` ä½œä¸ºæ¨¡æ¿
**ç°æœ‰é¡¹ç›®ï¼š** å‚è€ƒ `ç®€åŒ–æ–¹æ¡ˆå®æ–½å»ºè®®.md` é€æ­¥é‡æ„
**æµ‹è¯•éªŒè¯ï¼š** ä½¿ç”¨ `simple-module-access-test.js` éªŒè¯åŠŸèƒ½

**ç»“è®ºï¼šç”¨æˆ·çš„ç®€åŒ–æ–¹æ¡ˆæ˜¯æœ€ä½³å®è·µï¼Œåº”è¯¥å…¨é¢é‡‡ç”¨ï¼**
