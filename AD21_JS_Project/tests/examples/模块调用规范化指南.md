# æ¨¡å—è°ƒç”¨è§„èŒƒåŒ–æŒ‡å—

## ğŸ¯ æ ¸å¿ƒåŸåˆ™

**æ¨¡å—è°ƒç”¨åº”è¯¥ä¾é æ¡ä»¶ä¾èµ–æ¨¡å¼ `if (ModuleName)`ï¼Œè€Œä¸æ˜¯ç›´æ¥è°ƒç”¨æ¨¡å¼ `ModuleName.method()`**

## ğŸ“‹ æ¨èçš„æ¨¡å—è°ƒç”¨æ¨¡å¼

### âœ… æ­£ç¡®æ–¹å¼ï¼šæ¡ä»¶ä¾èµ–æ¨¡å¼

```javascript
// 1. æ£€æŸ¥æ¨¡å—æ˜¯å¦å­˜åœ¨
if (BaseModule) {
    // 2. ä½¿ç”¨æ¨¡å—åŠŸèƒ½
    var instance = BaseModule.create(options);
    instance.init();
}

// å…¶ä»–ç¤ºä¾‹
if (LoggerModule) {
    var logger = LoggerModule.create({moduleName: "MyModule"});
    logger.info("æ¨¡å—åŠ è½½æˆåŠŸ");
}

if (ObjectModule) {
    var obj = ObjectModule.createObject({type: "track"});
}
```

### âŒ ä¸æ¨èï¼šç›´æ¥è°ƒç”¨æ¨¡å¼

```javascript
// ä¸æ¨èï¼šç›´æ¥è°ƒç”¨ï¼Œä¸æ£€æŸ¥ä¾èµ–
var instance = BaseModule.create(options); // å¯èƒ½å‡ºé”™

// ä¸æ¨èï¼šæ²¡æœ‰æ¡ä»¶æ£€æŸ¥
LoggerModule.info("ç›´æ¥è°ƒç”¨"); // å¯èƒ½æœªå®šä¹‰
```

## ğŸ”§ ä¾èµ–å£°æ˜æ–¹å¼

### åœ¨æ¨¡å—æ–‡ä»¶ä¸­å£°æ˜ä¾èµ–

```javascript
var MyModule = (function(){
    // åœ¨æ¨¡å—å¼€å§‹å¤„å£°æ˜æ‰€æœ‰ä¾èµ–
    // ä½¿ç”¨ if (ModuleName) æ¨¡å¼
    
    function create(options) {
        // æ£€æŸ¥åŸºç¡€æ¨¡å—ä¾èµ–
        if (BaseModule) {
            var base = BaseModule.create(options);
            // ä½¿ç”¨åŸºç¡€æ¨¡å—åŠŸèƒ½
        }
        
        // æ£€æŸ¥æ—¥å¿—æ¨¡å—ä¾èµ–
        if (LoggerModule) {
            var logger = LoggerModule.create({moduleName: "MyModule"});
            logger.info("MyModule æ­£åœ¨åˆå§‹åŒ–");
        }
        
        return {
            // æ¨¡å—æ¥å£
        };
    }
    
    return {
        create: create
    };
})();
```

## ğŸ“Š ä¸¤ç§æ¨¡å¼å¯¹æ¯”

| ç‰¹æ€§ | æ¡ä»¶ä¾èµ–æ¨¡å¼ | ç›´æ¥è°ƒç”¨æ¨¡å¼ |
|------|-------------|-------------|
| **å®‰å…¨æ€§** | âœ… é«˜ | âŒ ä½ |
| **é”™è¯¯å¤„ç†** | âœ… è‡ªåŠ¨ | âŒ æ‰‹åŠ¨ |
| **å¯è¯»æ€§** | âœ… æ¸…æ™° | âŒ éšå¼ |
| **è°ƒè¯•** | âœ… å®¹æ˜“ | âŒ å›°éš¾ |
| **å…¼å®¹æ€§** | âœ… å¼º | âŒ è„†å¼± |

## ğŸ› ï¸ å®é™…åº”ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šLoggeræ¨¡å—ä½¿ç”¨BaseModule

```javascript
var LoggerModule = (function(){
    function create(options) {
        // âœ… æ­£ç¡®ï¼šæ¡ä»¶ä¾èµ–æ£€æŸ¥
        if (BaseModule) {
            var baseInstance = BaseModule.create({
                moduleName: options.moduleName || "LoggerModule",
                autoInit: false
            });
            
            // é‡å†™åˆå§‹åŒ–æ–¹æ³•
            baseInstance._performInitialization = function() {
                // Loggerç‰¹å®šçš„åˆå§‹åŒ–é€»è¾‘
                return true;
            };
            
            return baseInstance;
        } else {
            // é™çº§å¤„ç†
            return {
                error: function() { console.log("Error: " + arguments[0]); }
            };
        }
    }
    
    return {
        create: create
    };
})();
```

### ç¤ºä¾‹2ï¼šå¤æ‚ä¾èµ–é“¾

```javascript
var ComplexModule = (function(){
    function create(options) {
        var components = {};
        
        // âœ… æŒ‰ä¼˜å…ˆçº§æ£€æŸ¥ä¾èµ–
        if (BaseModule) {
            components.base = BaseModule.create(options);
        }
        
        if (LoggerModule) {
            components.logger = LoggerModule.create(options);
        }
        
        if (ObjectModule) {
            components.object = ObjectModule.createObject(options);
        }
        
        // éªŒè¯å…³é”®ä¾èµ–
        if (!components.base) {
            throw new Error("BaseModule æ˜¯å¿…éœ€çš„ä¾èµ–");
        }
        
        return {
            init: function() {
                if (components.logger) {
                    components.logger.info("ComplexModule åˆå§‹åŒ–å¼€å§‹");
                }
                
                if (components.base) {
                    components.base.init();
                }
                
                if (components.logger) {
                    components.logger.info("ComplexModule åˆå§‹åŒ–å®Œæˆ");
                }
            }
        };
    }
    
    return {
        create: create
    };
})();
```

## ğŸ¨ ç¼–ç è§„èŒƒ

### 1. ä¾èµ–æ£€æŸ¥æ¨¡å¼

```javascript
// âœ… æ¨èï¼šå®Œæ•´çš„ä¾èµ–æ£€æŸ¥
if (ModuleName) {
    // ä½¿ç”¨æ¨¡å—åŠŸèƒ½
    var result = ModuleName.method(params);
} else {
    // ä¼˜é›…é™çº§
    console.warn("ModuleName ä¸å¯ç”¨ï¼Œä½¿ç”¨é»˜è®¤å®ç°");
}

// âŒ é¿å…ï¼šç›´æ¥è°ƒç”¨
var result = ModuleName.method(params); // å¯èƒ½å‡ºé”™
```

### 2. å¤šé‡ä¾èµ–å¤„ç†

```javascript
// âœ… æ¨èï¼šåˆ†å±‚ä¾èµ–æ£€æŸ¥
function initializeModule() {
    // ç¬¬ä¸€å±‚ï¼šæ ¸å¿ƒä¾èµ–
    if (BaseModule) {
        var base = BaseModule.create();
    }
    
    // ç¬¬äºŒå±‚ï¼šåŠŸèƒ½ä¾èµ–
    if (LoggerModule) {
        var logger = LoggerModule.create();
    }
    
    // ç¬¬ä¸‰å±‚ï¼šå¯é€‰ä¾èµ–
    if (OptionalModule) {
        var optional = OptionalModule.create();
    }
}
```

### 3. é”™è¯¯å¤„ç†

```javascript
// âœ… æ¨èï¼šå®‰å…¨çš„æ¨¡å—ä½¿ç”¨
function safeModuleCall() {
    try {
        if (TargetModule) {
            var result = TargetModule.doSomething();
            return result;
        } else {
            console.warn("TargetModule ä¸å¯ç”¨");
            return null;
        }
    } catch (error) {
        if (LoggerModule) {
            LoggerModule.error("æ¨¡å—è°ƒç”¨å¤±è´¥: " + error.message);
        }
        throw error;
    }
}
```

## ğŸ” è‡ªåŠ¨å·¥å…·æ”¯æŒ

### ä¾èµ–æ£€æµ‹å·¥å…·

è‡ªåŠ¨æ„å»ºå·¥å…·ç°åœ¨ï¼š

1. **ä¸»è¦æ£€æµ‹æ¡ä»¶ä¾èµ–æ¨¡å¼**ï¼š`if (ModuleName)`
2. **æç¤ºç›´æ¥è°ƒç”¨æ¨¡å¼**ï¼š`ModuleName.method()`ï¼ˆä»…ä½œä¸ºæç¤ºï¼‰
3. **ç”Ÿæˆè§„èŒƒåŒ–çš„æµ‹è¯•ä»£ç **ï¼šä½¿ç”¨æ¡ä»¶ä¾èµ–æ¨¡å¼

### æµ‹è¯•è„šæœ¬ç”Ÿæˆ

```javascript
// è‡ªåŠ¨ç”Ÿæˆçš„æµ‹è¯•ä»£ç ç¤ºä¾‹
function runAutoTest() {
    console.log("=== è‡ªåŠ¨ç”Ÿæˆçš„æ¨¡å—æµ‹è¯• ===");
    
    // âœ… ä½¿ç”¨æ¡ä»¶ä¾èµ–æ¨¡å¼æµ‹è¯•
    if (BaseModule && LoggerModule) {
        console.log("âœ… æ ¸å¿ƒæ¨¡å—å¯ç”¨");
        
        if (BaseModule.create && LoggerModule.create) {
            console.log("âœ… æ¨¡å—æ–¹æ³•å¯ç”¨");
            console.log("æ¨¡å—è°ƒç”¨æµ‹è¯•é€šè¿‡");
        } else {
            console.log("âŒ æ¨¡å—æ–¹æ³•ä¸å¯ç”¨");
        }
    } else {
        console.log("âŒ æ ¸å¿ƒæ¨¡å—ä¸å¯ç”¨");
    }
}
```

## ğŸ“ æœ€ä½³å®è·µæ€»ç»“

1. **æ€»æ˜¯ä½¿ç”¨æ¡ä»¶æ£€æŸ¥**ï¼š`if (ModuleName)` æ˜¯å”¯ä¸€æ¨èçš„ä¾èµ–æ¨¡å¼
2. **æä¾›é™çº§æ–¹æ¡ˆ**ï¼šå½“ä¾èµ–ä¸å¯ç”¨æ—¶çš„å¤‡é€‰æ–¹æ¡ˆ
3. **æ¸…æ™°çš„ä¾èµ–å£°æ˜**ï¼šåœ¨æ¨¡å—å¼€å§‹å¤„æ˜ç¡®åˆ—å‡ºæ‰€æœ‰ä¾èµ–
4. **åˆ†å±‚ä¾èµ–ç®¡ç†**ï¼šæŒ‰é‡è¦æ€§é¡ºåºæ£€æŸ¥ä¾èµ–
5. **å®Œæ•´çš„é”™è¯¯å¤„ç†**ï¼šç»“åˆæ¡ä»¶æ£€æŸ¥å’Œå¼‚å¸¸å¤„ç†
6. **ä½¿ç”¨è‡ªåŠ¨å·¥å…·**ï¼šè®©å·¥å…·éªŒè¯ä¾èµ–å…³ç³»çš„æ­£ç¡®æ€§

## ğŸ¯ è¿ç§»æŒ‡å—

å¦‚æœç°æœ‰ä»£ç ä½¿ç”¨ç›´æ¥è°ƒç”¨æ¨¡å¼ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤è¿ç§»ï¼š

### æ­¥éª¤1ï¼šæ·»åŠ æ¡ä»¶æ£€æŸ¥
```javascript
// åŸä»£ç 
var result = ModuleName.method();

// è¿ç§»å
if (ModuleName) {
    var result = ModuleName.method();
} else {
    // å¤„ç†æ¨¡å—ä¸å¯ç”¨çš„æƒ…å†µ
    var result = null;
}
```

### æ­¥éª¤2ï¼šæ·»åŠ é™çº§å¤„ç†
```javascript
if (ModuleName) {
    var result = ModuleName.method();
} else {
    // æä¾›åŸºæœ¬åŠŸèƒ½
    var result = defaultImplementation();
}
```

### æ­¥éª¤3ï¼šéªŒè¯ä¾èµ–
```javascript
// ä½¿ç”¨è‡ªåŠ¨æ„å»ºå·¥å…·éªŒè¯
node auto-test-builder.js module1.js module2.js test.js
```

é€šè¿‡éµå¾ªè¿™äº›è§„èŒƒï¼Œå¯ä»¥ç¡®ä¿æ¨¡å—ç³»ç»Ÿçš„ç¨³å®šæ€§ã€å¯ç»´æŠ¤æ€§å’Œæ˜“è¯»æ€§ã€‚
